$(function(){function a(){console.log("Add Clicked");var a=$("#user").val(),b=$('input[name="myClass"]:checked').val(),c=$('input[name="theirClass"]:checked').val(),d=$('input[name="result"]:checked').val();n.writeFile("/space/Feed/"+a+"_"+b+"_"+c+"_"+d+"."+m,"",function(a,b){return a?(console.log("error uploading"),showError(a)):(m+=1,void console.log("file uploaded"))})}function b(){var a=$("#login").val();c(a),$("#generalS").removeClass("show").addClass("hide"),$("#personalS").removeClass("hide").addClass("show")}function c(a){n.stat("/space/Users/"+a+"/Statistics/",{readDir:!0},function(a,b,c){if(a)return console.log("user not found"),showError(a);console.log("stats found");for(var d={Druid:NaN,Hunter:NaN,Mage:NaN,Paladin:NaN,Priest:NaN,Rogue:NaN,Shaman:NaN,Warlock:NaN,Warrior:NaN},e=[],f=c.length-1;f>=0;f--)e=c[f].name.split("_"),d[e[0]]=parseFloat(e[1])/(parseFloat(e[2])+parseFloat(e[1]))*100;$("#pDruidS").html(d.Druid.toFixed(0)+" %"),$("#pHunterS").html(d.Hunter.toFixed(0)+" %"),$("#pMageS").html(d.Mage.toFixed(0)+" %"),$("#pPaladinS").html(d.Paladin.toFixed(0)+" %"),$("#pPriestS").html(d.Priest.toFixed(0)+" %"),$("#pRogueS").html(d.Rogue.toFixed(0)+" %"),$("#pShamanS").html(d.Shaman.toFixed(0)+" %"),$("#pWarlockS").html(d.Warlock.toFixed(0)+" %"),$("#pWarriorS").html(d.Warrior.toFixed(0)+" %")})}function d(){e(),$("#personalS").removeClass("show").addClass("hide"),$("#generalS").removeClass("hide").addClass("show")}function e(){n.stat("/space/General/",{readDir:!0},function(a,b,c){if(a)return console.log("general not found"),showError(a);console.log("general stats found");for(var d=[],e={Druid:NaN,Hunter:NaN,Mage:NaN,Paladin:NaN,Priest:NaN,Rogue:NaN,Shaman:NaN,Warlock:NaN,Warrior:NaN},f=c.length-1;f>=0;f--)d=c[f].name.split("_"),e[d[0]]=parseFloat(d[1])/(parseFloat(d[2])+parseFloat(d[1]))*100;$("#gDruidS").html(e.Druid.toFixed(0)+" %"),$("#gHunterS").html(e.Hunter.toFixed(0)+" %"),$("#gMageS").html(e.Mage.toFixed(0)+" %"),$("#gPaladinS").html(e.Paladin.toFixed(0)+" %"),$("#gPriestS").html(e.Priest.toFixed(0)+" %"),$("#gRogueS").html(e.Rogue.toFixed(0)+" %"),$("#gShamanS").html(e.Shaman.toFixed(0)+" %"),$("#gWarlockS").html(e.Warlock.toFixed(0)+" %"),$("#gWarriorS").html(e.Warrior.toFixed(0)+" %")})}function f(){var a=$("#login").val(),b=$("#otherI").val();g(a,b)}function g(a,b){n.readFile("/space/Users/"+a+"/Access/"+b,null,function(a,c,d){return a?($("#personalS").removeClass("show").addClass("hide"),!1):(h(b),$("#generalS").removeClass("show").addClass("hide"),$("#personalS").removeClass("hide").addClass("show"),void 0)})}function h(a){n.stat("/space/Users/"+a+"/Statistics/",{readDir:!0},function(a,b,c){if(a)return console.log("user not found"),showError(a);console.log("stats found");for(var d={Druid:NaN,Hunter:NaN,Mage:NaN,Paladin:NaN,Priest:NaN,Rogue:NaN,Shaman:NaN,Warlock:NaN,Warrior:NaN},e=[],f=c.length-1;f>=0;f--)e=c[f].name.split("_"),d[e[0]]=parseFloat(e[1])/(parseFloat(e[2])+parseFloat(e[1]))*100;$("#pDruidS").html(d.Druid.toFixed(0)+" %"),$("#pHunterS").html(d.Hunter.toFixed(0)+" %"),$("#pMageS").html(d.Mage.toFixed(0)+" %"),$("#pPaladinS").html(d.Paladin.toFixed(0)+" %"),$("#pPriestS").html(d.Priest.toFixed(0)+" %"),$("#pRogueS").html(d.Rogue.toFixed(0)+" %"),$("#pShamanS").html(d.Shaman.toFixed(0)+" %"),$("#pWarlockS").html(d.Warlock.toFixed(0)+" %"),$("#pWarriorS").html(d.Warrior.toFixed(0)+" %")})}function i(){var a=$("#login").val(),b=$("#friend").val();j(a,b)}function j(a,b){n.writeFile("/space/Feed/REQ_"+b+"_"+a+"."+m,"",function(a,b){return a?(console.log("error requesting"),null):(m+=1,void console.log("request sent"))})}function k(){for(var a=$("#login").val(),b=document.getElementById("pending");b.firstChild;)b.removeChild(b.firstChild);l(a)}function l(a){n.stat("/space/Users/"+a+"/Request/",{readDir:!0},function(a,b,c){if(a)return console.log("requests not found"),null;console.log("requests");for(var d=c.length-1;d>=0;d--)$("#pending").append("<li>Pending Request From "+c[d].name)})}var m=0;$("button[name='add']").click(a),$("button[name='personalS']").click(b),$("button[name='generalS']").click(d),$("button[name='otherS']").click(f),$("button[name='getReq']").click(k),$("button[name='sendReq']").click(i);var n=new Dropbox.Client({key:"75ozb45t6z1tq24"});n.isAuthenticated()?console.log("auth cached"):n.authenticate(function(a,b){return a?void console.log("auth error"):void console.log("auth Success")})});